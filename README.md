# ServiCiudadCali – Monolito (Hexagonal)

Servicio REST que consolida la **deuda de un cliente** a partir de:
- **Acueducto**: facturas almacenadas en **MySQL** (`facturas_acueducto`).
- **Energía**: facturas simuladas desde **archivo plano** (`src/main/resources/consumos_energia.txt`).

Devuelve un JSON unificado con el nombre del cliente, la fecha de consulta, el resumen de cada factura y el total a pagar.

---

## Requisitos

- **Java 21+**
- **Maven 3.9+**
- **MySQL 8+**
- Puerto libre **8080**

---

## Clonar y compilar

```bash
git clone https://github.com/Katar012/ING-SOFTWARE-2.git
cd ServiCiudadCali
mvn spring-boot:run
```

## Entrar al fronted
Desde el navegador escribir localhost:8080 para acceder al frontend de la aplicación.

## Configuración de la base de datos (MySQL 8)
- **Comando para crear la database**
```bash
CREATE DATABASE acueducto;
```

- **Comando para acceder a la database**
```bash
USE acueducto;
```

- **Comando para crear la tabla cliente**

```bash
CREATE TABLE cliente (
  id        VARCHAR(20)  NOT NULL,
  nombre    VARCHAR(100) NOT NULL,
  PRIMARY KEY (id)
);
```
- **Comando para crear la tabla factura acueducto**
```bash
CREATE TABLE facturas_acueducto (
  id           BIGINT NOT NULL AUTO_INCREMENT,
  id_cliente   VARCHAR(20) NOT NULL,
  periodo      VARCHAR(20) NOT NULL,   
  consumo_m3   INT NOT NULL,
  valor_pagar  DECIMAL(10,2) NOT NULL,
  PRIMARY KEY (id),
  KEY idx_facturas_id_cliente (id_cliente),
  CONSTRAINT fk_factura_cliente
    FOREIGN KEY (id_cliente) REFERENCES cliente(id)
);
```
- **Comando para insertar los datos en la tabla cliente**
```bash
INSERT INTO cliente (id, nombre) VALUES
('1106514392', 'Diego Maradonna'),
('1002345678', 'Juan Pérez'),
('1002345679', 'María González'),
('1002345680', 'Luis Rodríguez'),
('1002345681', 'Camila Herrera'),
('1002345682', 'Carlos Méndez'),
('1002345683', 'Valentina López'),
('1002345684', 'Andrés Torres'),
('1002345685', 'Sofía Castro'),
('1002345686', 'Sebastián Ríos'),
('1002345687', 'Natalia Gómez'),
('1002345688', 'Felipe Morales'),
('1002345689', 'Daniela Ruiz'),
('1002345690', 'Julián Restrepo'),
('1002345691', 'Sara Valencia'),
('1002345692', 'Tomás Gil'),
('1002345693', 'Isabella Cano'),
('1002345694', 'Gabriel Suárez'),
('1002345695', 'Laura Castaño'),
('1002345696', 'Manuel Patiño'),
('1002345697', 'Lucía Salazar'),
('1002345698', 'Santiago Villa'),
('1002345699', 'Paula Ramírez'),
('1002345700', 'Miguel Silva'),
('1002345701', 'Adriana Correa'),
('1002345702', 'Jorge Cardona'),
('1002345703', 'Diana Lozano'),
('1002345704', 'Pedro Rincón'),
('1002345705', 'Tatiana Hoyos'),
('1002345706', 'Cristian Ortega'),
('1002345707', 'Mariana Pineda'),
('1002345708', 'Simón Gallego'),
('1002345709', 'Carolina Ospina'),
('1002345710', 'Nicolás Mejía'),
('1002345711', 'Daniel Jiménez'),
('1002345712', 'Andrea Cortés'),
('1002345713', 'David Álvarez'),
('1002345714', 'Gabriela Peña'),
('1002345715', 'Esteban Arias'),
('1002345716', 'Valeria Guzmán'),
('1002345717', 'Juanita Cárdenas'),
('1002345718', 'Samuel Rojas'),
('1002345719', 'Catalina Rincón'),
('1002345720', 'Mateo Trujillo'),
('1002345721', 'Daniel Ocampo'),
('1002345722', 'Laura Montoya'),
('1002345723', 'Santiago Marín'),
('1002345724', 'Mónica Aguirre'),
('1002345725', 'Felipe Valencia'),
('1002345726', 'Luisa Martínez'),
('1002345727', 'Jhonatan Quintero'),
('1002345728', 'Melissa Acosta'),
('1002345729', 'Fernando Molina'),
('1002345730', 'Juliana Ibáñez'),
('1002345731', 'Ricardo Zapata'),
('1002345732', 'Diana Vélez'),
('1002345733', 'Camilo Ramírez'),
('1002345734', 'Nicolás Londoño'),
('1002345735', 'Valentina Cifuentes'),
('1002345736', 'Juan Esteban Ramos'),
('1002345737', 'Sara Alarcón'),
('1002345738', 'Emilio Arango'),
('1002345739', 'Laura Molina'),
('1002345740', 'Andrés Gutiérrez'),
('1002345741', 'Camila Cuesta'),
('1002345742', 'Santiago Jaramillo'),
('1002345743', 'Lucía Beltrán'),
('1002345744', 'David Castañeda'),
('1002345745', 'Laura Naranjo'),
('1002345746', 'Julián Molina'),
('1002345747', 'Natalia Rivera'),
('1002345748', 'Samuel Quintero'),
('1002345749', 'Isabella Pardo'),
('1002345750', 'Cristian Medina'),
('1002345751', 'Tatiana Gallo'),
('1002345752', 'Felipe Orozco'),
('1002345753', 'Mariana Zapata'),
('1002345754', 'Andrés Vélez'),
('1002345755', 'Valeria Arango'),
('1002345756', 'Sergio Roldán'),
('1002345757', 'Laura Palacio'),
('1002345758', 'Esteban Correa'),
('1002345759', 'Natalia Patiño'),
('1002345760', 'Daniel López'),
('1002345761', 'Carolina Rincón'),
('1002345762', 'Mateo Hernández'),
('1002345763', 'Sara Ocampo'),
('1002345764', 'Julián Gómez'),
('1002345765', 'Valentina Marulanda'),
('1002345766', 'Tomás Ramírez'),
('1002345767', 'Isabella Montoya'),
('1002345768', 'Santiago Castaño'),
('1002345769', 'Lucía Valencia'),
('1002345770', 'David Suárez'),
('1002345771', 'Laura Gutiérrez'),
('1002345772', 'Samuel Castro'),
('1002345773', 'María Fernanda Zapata'),
('1002345774', 'Andrés Ramírez'),
('1002345775', 'Daniela Cárdenas'),
('1002345776', 'Felipe González'),
('1002345777', 'Sofía Torres'),
('1002345778', 'Julián Correa'),
('1002345779', 'Camila Ortiz'),
('1002345780', 'Santiago Restrepo');
```
- **Comando para insertar los datos en la tabla factura acueducto**
```bash
INSERT INTO facturas_acueducto (id_cliente, periodo, consumo_m3, valor_pagar) VALUES
('1106514392', '202510', 9, 58500.00),
('1002345678', '202510', 12, 78000.00),
('1002345679', '202510', 15, 97500.00),
('1002345680', '202510', 18, 117000.00),
('1002345681', '202510', 10, 65000.00),
('1002345682', '202510', 21, 136500.00),
('1002345683', '202510', 8, 52000.00),
('1002345684', '202510', 17, 110500.00),
('1002345685', '202510', 14, 91000.00),
('1002345686', '202510', 20, 130000.00),
('1002345687', '202510', 11, 71500.00),
('1002345688', '202510', 13, 84500.00),
('1002345689', '202510', 16, 104000.00),
('1002345690', '202510', 9, 58500.00),
('1002345691', '202510', 18, 117000.00),
('1002345692', '202510', 7, 45500.00),
('1002345693', '202510', 10, 65000.00),
('1002345694', '202510', 12, 78000.00),
('1002345695', '202510', 14, 91000.00),
('1002345696', '202510', 15, 97500.00),
('1002345697', '202510', 9, 58500.00),
('1002345698', '202510', 11, 71500.00),
('1002345699', '202510', 20, 130000.00),
('1002345700', '202510', 13, 84500.00),
('1002345701', '202510', 10, 65000.00),
('1002345702', '202510', 19, 123500.00),
('1002345703', '202510', 8, 52000.00),
('1002345704', '202510', 6, 39000.00),
('1002345705', '202510', 17, 110500.00),
('1002345706', '202510', 11, 71500.00),
('1002345707', '202510', 13, 84500.00),
('1002345708', '202510', 14, 91000.00),
('1002345709', '202510', 12, 78000.00),
('1002345710', '202510', 16, 104000.00),
('1002345711', '202510', 9, 58500.00),
('1002345712', '202510', 18, 117000.00),
('1002345713', '202510', 10, 65000.00),
('1002345714', '202510', 21, 136500.00),
('1002345715', '202510', 8, 52000.00),
('1002345716', '202510', 14, 91000.00),
('1002345717', '202510', 15, 97500.00),
('1002345718', '202510', 9, 58500.00),
('1002345719', '202510', 10, 65000.00),
('1002345720', '202510', 11, 71500.00),
('1002345721', '202510', 13, 84500.00),
('1002345722', '202510', 19, 123500.00),
('1002345723', '202510', 7, 45500.00),
('1002345724', '202510', 16, 104000.00),
('1002345725', '202510', 20, 130000.00),
('1002345726', '202510', 12, 78000.00),
('1002345727', '202510', 14, 91000.00),
('1002345728', '202510', 18, 117000.00),
('1002345729', '202510', 9, 58500.00),
('1002345730', '202510', 15, 97500.00),
('1002345731', '202510', 11, 71500.00),
('1002345732', '202510', 10, 65000.00),
('1002345733', '202510', 19, 123500.00),
('1002345734', '202510', 13, 84500.00),
('1002345735', '202510', 9, 58500.00),
('1002345736', '202510', 18, 117000.00),
('1002345737', '202510', 8, 52000.00),
('1002345738', '202510', 10, 65000.00),
('1002345739', '202510', 14, 91000.00),
('1002345740', '202510', 12, 78000.00),
('1002345741', '202510', 20, 130000.00),
('1002345742', '202510', 16, 104000.00),
('1002345743', '202510', 7, 45500.00),
('1002345744', '202510', 11, 71500.00),
('1002345745', '202510', 13, 84500.00),
('1002345746', '202510', 17, 110500.00),
('1002345747', '202510', 10, 65000.00),
('1002345748', '202510', 9, 58500.00),
('1002345749', '202510', 19, 123500.00),
('1002345750', '202510', 8, 52000.00),
('1002345751', '202510', 15, 97500.00),
('1002345752', '202510', 12, 78000.00),
('1002345753', '202510', 16, 104000.00),
('1002345754', '202510', 10, 65000.00),
('1002345755', '202510', 18, 117000.00),
('1002345756', '202510', 14, 91000.00),
('1002345757', '202510', 13, 84500.00),
('1002345758', '202510', 7, 45500.00),
('1002345759', '202510', 9, 58500.00),
('1002345760', '202510', 20, 130000.00),
('1002345761', '202510', 8, 52000.00),
('1002345762', '202510', 15, 97500.00),
('1002345763', '202510', 10, 65000.00),
('1002345764', '202510', 11, 71500.00),
('1002345765', '202510', 14, 91000.00),
('1002345766', '202510', 12, 78000.00),
('1002345767', '202510', 17, 110500.00),
('1002345768', '202510', 9, 58500.00),
('1002345769', '202510', 18, 117000.00),
('1002345770', '202510', 8, 52000.00),
('1002345771', '202510', 10, 65000.00),
('1002345772', '202510', 19, 123500.00),
('1002345773', '202510', 7, 45500.00),
('1002345774', '202510', 15, 97500.00),
('1002345775', '202510', 13, 84500.00),
('1002345776', '202510', 12, 78000.00),
('1002345777', '202510', 11, 71500.00),
('1002345778', '202510', 16, 104000.00),
('1002345779', '202510', 20, 130000.00),
('1002345780', '202510', 14, 91000.00);
```
